var topRange=200,edgeMargin=20,animationTime=600,contentTop=[];$(document).ready(function(){$('html,body').bind('scroll mousedown DOMMouseScroll mousewheel keyup',function(e){if(e.which>0||e.type=='mousedown'||e.type=='mousewheel'){$('html,body').stop()}})$('.side-nav').find('a').each(function(){contentTop.push($($(this).attr('href')).offset().top)})$('.side-nav').find('a').click(function(){var a=this,newTop=Math.min(contentTop[$('.side-nav a').index($(this))],$(document).height()-$(window).height());$('html,body').stop().animate({'scrollTop':newTop},animationTime,function(){window.location.hash=$(a).attr('href')});return false})$(window).scroll(function(){var b=$(window).scrollTop(),bodyHt=$(document).height(),vpHt=$(window).height()+edgeMargin;$.each(contentTop,function(i,a){if((a>b-edgeMargin&&(a<b+topRange||(b+vpHt)>=bodyHt))){$('.side-nav li a').removeClass('active').eq(i).addClass('active')}})})})